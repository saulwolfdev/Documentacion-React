"use strict";(self.webpackChunkstorybook_docu=self.webpackChunkstorybook_docu||[]).push([[411],{"./src/Conceptos de Javascript/17-fetch-api.mdx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),C_dev_Documentacion_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mdx-js/react/lib/index.js"),_components_mdx_index_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components-mdx/index.js");__webpack_require__("./src/styles.css");function _createMdxContent(props){const _components=Object.assign({h1:"h1",p:"p",h4:"h4",ul:"ul",li:"li",strong:"strong"},(0,C_dev_Documentacion_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim__WEBPACK_IMPORTED_MODULE_4__.ah)(),props.components);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h1,{id:"fetch-api",children:"Fetch API"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.p,{children:"Fetch es una API de JavaScript que permite hacer peticiones HTTP para obtener recursos de forma asíncrona desde un servidor.\r\nEsta API fue introducida en el estándar de JavaScript en el 2015 y ha ido ganando popularidad en los últimos años."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.p,{children:"La API Fetch se puede utilizar para hacer solicitudes de recursos tales como texto, imágenes, archivos JSON, entre otros, y devolverlos como objetos JavaScript que pueden ser\r\nutilizados en la aplicación."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.p,{children:"Además es importante tener en cuenta que Fetch utiliza promesas, lo que significa que se puede encadenar varias operaciones, como decodificar una respuesta JSON y actualizar la\r\ninterfaz de usuario de la aplicación con los datos resultantes.\r\nAdemás, Fetch proporciona soporte para cabeceras personalizadas, autenticación y manejo de errores de manera integrada."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h4,{id:"características-clave-de-la-fetch-api",children:"Características clave de la Fetch API:"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.ul,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:"Basada en Promesas:"})," La Fetch API utiliza Promesas lo que simplifica el manejo de operaciones asíncronas. Esto facilita la escritura de código limpio y legible, especialmente\r\nal tratar con múltiples solicitudes asíncronas."]}),"\n"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:"Objetos Request y Response:"})," La Fetch API introduce los objetos Request y Response, que representan la solicitud HTTP realizada y la respuesta recibida, respectivamente.\r\nEstos objetos proporcionan métodos y propiedades para trabajar con los detalles de la solicitud y la respuesta."]}),"\n"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:"Encabezados:"})," La Fetch API permite trabajar fácilmente con encabezados. Puedes establecer, obtener y eliminar encabezados mediante el objeto Headers, lo que facilita la\r\npersonalización de las solicitudes."]}),"\n"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:"Soporte para CORS (Intercambio de Recursos de Orígenes Cruzados):"})," La Fetch API admite CORS lo que te permite realizar solicitudes a un dominio diferente al que sirve la\r\npágina web. Esto es esencial para construir aplicaciones web modernas que interactúan con diversas APIs."]}),"\n"]}),"\n"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components_mdx_index_js__WEBPACK_IMPORTED_MODULE_2__.dn,{codeString:"\n  fetch('https://jsonplaceholder.typicode.com/todos')\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('La solicitud no fue exitosa');\n      }\n      return response.json();\n    })\n    .then(data => {\n      console.log(data);\n    })\n    .catch(error => {\n      console.error('Error:', error);\n    });\n  ",language:"javascript"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h4,{id:"promesas",children:"Promesas"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.p,{children:"Las promesas son un mecanismo en JavaScript para manejar operaciones asíncronas. Una promesa representa el resultado eventual (éxito o fracaso) de una operación asíncrona y\r\nproporciona una forma más clara de trabajar con este tipo de tareas. Una promesa puede estar en uno de tres estados: pendiente, resuelta o rechazada."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.p,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:"Ejemplo que combina la Fetch API y promesas para realizar una solicitud HTTP y manejar la respuesta de manera asíncrona:"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components_mdx_index_js__WEBPACK_IMPORTED_MODULE_2__.dn,{codeString:"\n  const apiUrl = 'https://jsonplaceholder.typicode.com/todos/1';\n\n  fetch(apiUrl)\n    .then(response => {\n      // Verificar si la respuesta es exitosa (código de estado 200-299)\n      if (!response.ok) {\n        throw new Error(`Error de red: ${response.status}`);\n      }\n    \n      // Parsear la respuesta como JSON y retornar la promesa resultante\n      return response.json();\n    })\n    .then(data => {\n      // Manejar los datos obtenidos\n      console.log('Datos obtenidos:', data);\n    })\n    .catch(error => {\n      // Manejar errores en cualquier etapa de la cadena de promesas\n      console.error('Error:', error);\n    });\n  ",language:"javascript"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.ul,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["El primer ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:".then()"})," maneja la respuesta de la solicitud fetch. Este bloque se ejecuta cuando la promesa devuelta por ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:"fetch(apiUrl)"})," se resuelve, es decir, cuando la solicitud de\r\nred se completa."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["Si la respuesta de la solicitud no es exitosa (código de estado diferente a 200-299), se lanza un error con ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:"throw new Error()"})," lo que provoca que la promesa se rechace."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["El segundo ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:".then()"})," maneja la promesa devuelta por ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:"response.json()"}),". Este bloque se ejecuta cuando la promesa de parseo del JSON se resuelve con éxito."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["El ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:".catch()"})," maneja cualquier error que pueda ocurrir en cualquier etapa de la cadena de promesas ya sea durante la solicitud fetch, el parseo del JSON, o cualquier otro\r\nproblema."]}),"\n"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h4,{id:"fetch-api-con-asyncawait",children:"Fetch API con Async/Await:"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["El uso de ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:"async/await"})," es una forma más moderna y legible de manejar operaciones asíncronas en JavaScript.\r\nAl trabajar con la Fetch API puedes utilizar ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:"async/await"})," para escribir código más sencillo y estructurado evitando el anidamiento excesivo de callbacks y haciendo que el\r\nflujo de control sea más claro."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.p,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:"Ejemplo con Fetch API y Async/Await:"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components_mdx_index_js__WEBPACK_IMPORTED_MODULE_2__.dn,{codeString:"\n  const apiUrl = 'https://jsonplaceholder.typicode.com/todos/1';\n\n  // Función asíncrona para realizar la solicitud usando fetch\n  async function fetchData() {\n    try {\n      // Realizar la solicitud y esperar a que la promesa se resuelva\n      const response = await fetch(apiUrl);\n\n      // Verificar si la respuesta es exitosa (código de estado 200-299)\n      if (!response.ok) {\n        throw new Error(`Error de red: ${response.status}`);\n      }\n\n      // Parsear la respuesta como JSON y obtener los datos\n      const data = await response.json();\n\n      // Manejar los datos obtenidos\n      console.log('Datos obtenidos:', data);\n    } catch (error) {\n      // Manejar errores en cualquier etapa de la operación asíncrona\n      console.error('Error:', error);\n    }\n  }\n\n  // Llamar a la función asíncrona\n  fetchData();\n  ",language:"javascript"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.ul,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["La función ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:"fetchData"})," está marcada como ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:"async"})," lo que significa que devuelve una promesa y puede contener operaciones ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:"await"}),"."]}),"\n"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h1,{id:"tips",children:"Tips"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h4,{id:"problemas-de-cors",children:"Problemas de CORS"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.p,{children:"Se puede encontrar problemas con la Política de Same-Origin (CORS).\r\nAsegúrate de que el servidor permita las solicitudes desde el origen de tu aplicación. Puedes configurar el servidor para incluir los encabezados CORS necesarios."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h4,{id:"verificación-del-estado-de-la-respuesta",children:"Verificación del Estado de la Respuesta"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.p,{children:"un error comun es no verificar el estado de la respuesta HTTP.\r\nAsegúrate de verificar si la respuesta fue exitosa antes de procesar los datos."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components_mdx_index_js__WEBPACK_IMPORTED_MODULE_2__.dn,{codeString:"\n  fetch('https://api.example.com/data')\n      .then(response => {\n          if (!response.ok) {\n              throw new Error('Network response was not ok');\n          }\n          return response.json();\n      })\n      .then(data => console.log(data))\n      .catch(error => console.error('Error:', error));\n  ",language:"javascript"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h4,{id:"manejo-de-tiempos-de-espera",children:"Manejo de Tiempos de Espera"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.p,{children:"Un error es no manejar tiempos de espera adecuadamente.\r\nPodes usar el método timeout para establecer un tiempo de espera en la solicitud."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components_mdx_index_js__WEBPACK_IMPORTED_MODULE_2__.dn,{codeString:"\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), 5000);\n\n  fetch('https://api.example.com/data', { signal: controller.signal })\n      .then(response => response.json())\n      .then(data => console.log(data))\n      .catch(error => console.error('Error:', error))\n      .finally(() => clearTimeout(timeoutId));\n  ",language:"javascript"})]})}__webpack_exports__.default=function MDXContent(props={}){const{wrapper:MDXLayout}=Object.assign({},(0,C_dev_Documentacion_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim__WEBPACK_IMPORTED_MODULE_4__.ah)(),props.components);return MDXLayout?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(MDXLayout,Object.assign({},props,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_createMdxContent,props)})):_createMdxContent(props)}},"./src/components-mdx/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{zx:function(){return components_mdx_Button},dn:function(){return components_mdx_CodeBlock},w2:function(){return components_mdx_CodeSandboxLink}});var slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),ToggleComponent=function ToggleComponent(_ref){var title=_ref.title,_ref$level=_ref.level,level=void 0===_ref$level?"h1":_ref$level,children=_ref.children,_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1],Heading=level;return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(Heading,{onClick:function toggle(){setIsOpen(!isOpen)},style:{cursor:"pointer"},children:title}),isOpen&&(0,jsx_runtime.jsx)("div",{children:children})]})};ToggleComponent.__docgenInfo={description:"",methods:[],displayName:"ToggleComponent",props:{level:{defaultValue:{value:'"h1"',computed:!1},required:!1}}};var prism=__webpack_require__("./node_modules/react-syntax-highlighter/dist/esm/prism.js"),material_dark=__webpack_require__("./node_modules/react-syntax-highlighter/dist/esm/styles/prism/material-dark.js"),lib=__webpack_require__("./node_modules/react-copy-to-clipboard/lib/index.js"),CodeBlock=function CodeBlock(_ref){var codeString=_ref.codeString,language=_ref.language,sandboxUrl=_ref.sandboxUrl,showButtons=_ref.showButtons,_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),copied=_useState2[0],setCopied=_useState2[1],copyButtonLabel=copied?"Copied":"Copy",primary=!!copied,copyButton=(0,jsx_runtime.jsx)(components_mdx_Button,{primary:primary,label:copyButtonLabel,size:"small"});return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(prism.Z,{language:language||"javascript",style:material_dark.Z,children:codeString}),(0,jsx_runtime.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[showButtons&&(0,jsx_runtime.jsx)(components_mdx_CodeSandboxLink,{url:sandboxUrl}),(0,jsx_runtime.jsx)(lib.CopyToClipboard,{text:codeString,onCopy:function handleCopy(){setCopied(!0),setTimeout((function(){return setCopied(!1)}),2e3)},children:copyButton})]})]})};CodeBlock.__docgenInfo={description:"",methods:[],displayName:"CodeBlock"};var components_mdx_CodeBlock=CodeBlock,objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),_excluded=["primary","backgroundColor","size","label"],Button=function Button(_ref){var primary=_ref.primary,backgroundColor=_ref.backgroundColor,size=_ref.size,label=_ref.label,props=(0,objectWithoutProperties.Z)(_ref,_excluded),mode=primary?"storybook-button--primary":"storybook-button--secondary";return(0,jsx_runtime.jsx)("button",(0,objectSpread2.Z)((0,objectSpread2.Z)({type:"button",className:["storybook-button","storybook-button--".concat(size),mode].join(" "),style:backgroundColor&&{backgroundColor:backgroundColor}},props),{},{children:label}))};Button.defaultProps={backgroundColor:null,primary:!1,size:"medium",onClick:void 0},Button.__docgenInfo={description:"",methods:[],displayName:"Button",props:{backgroundColor:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},primary:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},size:{defaultValue:{value:"'medium'",computed:!1},description:"",type:{name:"enum",value:[{value:"'small'",computed:!1},{value:"'medium'",computed:!1},{value:"'large'",computed:!1}]},required:!1},onClick:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"func"},required:!1},label:{description:"",type:{name:"string"},required:!0}}};var components_mdx_Button=Button,CodeSandboxLink=function CodeSandboxLink(_ref){var url=_ref.url,codeSandboxButton=(0,jsx_runtime.jsx)(components_mdx_Button,{primary:!1,label:"Ver en CodeSandbox",size:"small"});return(0,jsx_runtime.jsx)("span",{onClick:function redirectToCodeSandbox(){window.open(url,"_blank")},style:{cursor:"pointer",marginRight:"8px"},children:codeSandboxButton})};CodeSandboxLink.__docgenInfo={description:"",methods:[],displayName:"CodeSandboxLink"};var components_mdx_CodeSandboxLink=CodeSandboxLink},"./src/styles.css":function(){}}]);